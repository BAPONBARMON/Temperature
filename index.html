<div class="max-w-md mx-auto mt-10 p-6 bg-white rounded-2xl shadow-lg">
  <h2 class="text-2xl font-bold mb-4 text-center">Enter Your City</h2>
  <input
    id="cityInput"
    type="text"
    placeholder="Type city name..."
    class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
    oninput="fetchCities(this.value)"
    autocomplete="off"
  />
  <ul id="suggestions" class="bg-white border mt-2 rounded-xl shadow max-h-40 overflow-y-auto hidden"></ul>
</div>

<script>
  async function fetchCities(query) {
    const suggestionBox = document.getElementById("suggestions");
    if (query.length < 2) {
      suggestionBox.innerHTML = '';
      suggestionBox.classList.add('hidden');
      return;
    }

    const res = await fetch(`https://geodb-free-service.wirefreethought.com/v1/geo/cities?namePrefix=${query}&limit=5`);
    const data = await res.json();
    const cities = data.data;

    suggestionBox.innerHTML = cities.map(city =>
      `<li class="px-4 py-2 hover:bg-blue-100 cursor-pointer" onclick="selectCity('${city.name}')">${city.name}, ${city.countryCode}</li>`
    ).join("");

    suggestionBox.classList.remove('hidden');
  }

  function selectCity(name) {
    document.getElementById("cityInput").value = name;
    document.getElementById("suggestions").classList.add('hidden');
  }
</script>
